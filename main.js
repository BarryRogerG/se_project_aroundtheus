!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.link=e.link,this._cardSelector=n,this._handleImageClick=r},(n=[{key:"_setEventListeners",value:function(){var t=this;this._likeButton.addEventListener("click",(function(){return t._handleLikeIcon()})),this._cardElement.querySelector(".card__trash-button").addEventListener("click",(function(){return t._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(function(){t._handleImageClick(t)}))}},{key:"_handleLikeIcon",value:function(){this._likeButton.classList.toggle("card__like-button_active")}},{key:"_handleDeleteCard",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"getView",value:function(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardElement.querySelector(".card__title").textContent=this.name,this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardImageEl.src=this.link,this._cardImageEl.alt=this.name,this._setEventListeners(),this._cardElement}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var u=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)},(e=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),n.textContent=e,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"resetValidation",value:function(){var t=this;this.toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this.toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}var f=function(){return t=function t(e){var n=e.popupSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this)},(e=[{key:"open",value:function(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("mousedown",(function(e){(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&t.close()}))}}])&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},b.apply(null,arguments)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var _=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=v(e),function(t,e){if(e&&("object"==p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(e,n||[],v(t).constructor):e.apply(t,n))}(this,e,[{popupSelector:t}]))._imageElement=n._popupElement.querySelector(".modal__image"),n._captionElement=n._popupElement.querySelector(".modal__caption"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,r=[{key:"open",value:function(t){var n,r,o,i=t.name,a=t.link;this._imageElement.src=a,this._imageElement.alt=i,this._captionElement.textContent=i,(n=e,r=this,"function"==typeof(o=b(v(1&3?n.prototype:n),"open",r))?function(t){return o.apply(r,t)}:o)([])}}],r&&m(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:e+""}function g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(g=function(){return!!t})()}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(null,arguments)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}var P=function(t){function e(t){var n,r=t.popupSelector,o=t.handleFormSubmit;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=k(e),function(t,e){if(e&&("object"==E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,g()?Reflect.construct(e,n||[],k(t).constructor):e.apply(t,n))}(this,e,[{popupSelector:r}]))._handleFormSubmit=o;var i=n._popupElement.id;return n._popupForm=document.forms[i],n._inputElements=Array.from(n._popupForm.elements).filter((function(t){return t.classList.contains("modal__input")})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(e,t),n=e,r=[{key:"_getInputValues",value:function(){var t={};return this._inputElements.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t,n,r,o=this;(t=e,n=this,"function"==typeof(r=j(k(1&3?t.prototype:t),"setEventListeners",n))?function(t){return r.apply(n,t)}:r)([]),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),o._handleFormSubmit(o._getInputValues())}))}},{key:"resetForm",value:function(){this._popupForm.reset()}}],r&&S(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t){if("object"!=L(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:e+""}var B=function(){return t=function t(e){var n=e.nameSelector,r=e.jobSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r)},(e=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.job;this._nameElement.textContent=e,this._jobElement.textContent=n}}])&&C(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V(r.key),r)}}function V(t){var e=function(t){if("object"!=q(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==q(e)?e:e+""}var R=function(){return t=function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._container=document.querySelector(n)},(e=[{key:"renderItems",value:function(){var t=this;this._items.forEach((function(e){var n=t._renderer(e);t.addItem(n)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&T(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),F={},x=document.querySelector("#profile-edit-button"),D=document.querySelector("#profile-add-button"),z=document.querySelector("#modal-input-name"),A=document.querySelector("#modal-input-description");function U(t){Y.open(t)}function M(t){return new r(t,"#card-template",U).getView()}var N,Y=new _("#preview-card-modal"),G=new B({nameSelector:".profile__title",jobSelector:".profile__description"}),H=new R({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:M},".gallery__cards"),J=new P({popupSelector:"#profile-edit-modal",handleFormSubmit:function(t){G.setUserInfo({name:t.name,job:t.description}),J.close()}}),K=new P({popupSelector:"#add-card-modal",handleFormSubmit:function(t){var e={name:t.title,link:t.url};H.addItem(M(e)),K.resetForm(),K.close()}});Y.setEventListeners(),J.setEventListeners(),K.setEventListeners(),x.addEventListener("click",(function(){var t=G.getUserInfo();z.value=t.name,A.value=t.job,F["profile-edit"].resetValidation(),J.open()})),D.addEventListener("click",(function(){F["add-card"].resetValidation(),K.open()})),N={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(N.formSelector)).forEach((function(t){var e=new u(N,t),n=t.getAttribute("name");F[n]=e,e.enableValidation()})),H.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFpQjVHLE1BQVE4SCxFQUFnQm5JLEtBQ3pDa0gsRUFBd0I3RyxNQUFROEgsRUFBZ0JqQyxJQUNoRFksRUFBZSxnQkFBZ0J1QixrQkFDL0JaLEVBQWlCTCxNQUNuQixJQUVBSixFQUFpQnhHLGlCQUFpQixTQUFTLFdBQ3pDc0csRUFBZSxZQUFZdUIsa0JBQzNCUixFQUFhVCxNQUNmLElBOUYwQjNGLEVBYkQsQ0FDdkI2RyxhQUFjLGVBQ2QxRyxjQUFlLGdCQUNmRSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCQVFLRyxNQUFNQyxLQUFLdkIsU0FBU3dCLGlCQUFpQmhCLEVBQU82RyxlQUVwRDVFLFNBQVEsU0FBQ2hDLEdBQ2hCLElBQU02RyxFQUFZLElBQUkvRyxFQUFjQyxFQUFRQyxHQUN0QzhHLEVBQVc5RyxFQUFZK0csYUFBYSxRQUMxQzNCLEVBQWUwQixHQUFZRCxFQUMzQkEsRUFBVUcsa0JBQ1osSUFnR0ZsQixFQUFZbUIsYSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMubGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIlxyXG4gICAgLy9cIi5jYXJkX19saWtlLWJ1dHRvblwiXHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XHJcbiAgICAvL1wiLmNhcmRfX3RyYXNoLWJ1dHRvblwiXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCkpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTsgLy8gRW5zdXJlIGl0J3Mgc2VsZWN0ZWRcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIC8vIEdldCB0aGUgZm9ybSBJRCBmcm9tIHRoZSBwb3B1cCBzZWxlY3RvciAocmVtb3ZpbmcgdGhlICcjJyBwcmVmaXgpXHJcbiAgICBjb25zdCBmb3JtSWQgPSB0aGlzLl9wb3B1cEVsZW1lbnQuaWQ7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tmb3JtSWRdO1xyXG4gICAgLy8gU3RvcmUgaW5wdXQgZWxlbWVudHMgd2l0aCBjbGFzcyAnbW9kYWxfX2lucHV0JyBhcyBhIGNsYXNzIGZpZWxkXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cEZvcm0uZWxlbWVudHMpLmZpbHRlcihcclxuICAgICAgKGVsZW1lbnQpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2lucHV0XCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIHRvIHJlc2V0IGZvcm0gLSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgYWZ0ZXIgc3VjY2Vzc2Z1bCBzdWJtaXNzaW9uXHJcbiAgcmVzZXRGb3JtKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuLy8gRGVmaW5lIGFuIG9iamVjdCB0byBzdG9yZSBhbGwgZm9ybSB2YWxpZGF0b3JzXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBGdW5jdGlvbiB0byBlbmFibGUgdmFsaWRhdGlvbiBmb3IgYWxsIGZvcm1zXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG5cbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuLy8gRE9NIGVsZW1lbnRzXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWlucHV0LW5hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWlucHV0LWRlc2NyaXB0aW9uXCJcbik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XG4gIGltYWdlUHJldmlld1BvcHVwLm9wZW4oY2FyZERhdGEpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xhc3MgSW5zdGFuY2VzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgaW1hZ2VQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1jYXJkLW1vZGFsXCIpO1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufSk7XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBcIi5nYWxsZXJ5X19jYXJkc1wiXG4pO1xuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgbmFtZTogZm9ybURhdGEubmFtZSxcbiAgICAgIGpvYjogZm9ybURhdGEuZGVzY3JpcHRpb24sXG4gICAgfSk7XG4gICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICB9LFxufSk7XG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHtcbiAgICAgIG5hbWU6IGZvcm1EYXRhLnRpdGxlLFxuICAgICAgbGluazogZm9ybURhdGEudXJsLFxuICAgIH07XG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShyZW5kZXJDYXJkKG5ld0NhcmQpKTtcbiAgICBhZGRDYXJkUG9wdXAucmVzZXRGb3JtKCk7XG4gICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gIH0sXG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgYWxsIHBvcHVwc1xuaW1hZ2VQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmpvYjtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWVkaXRcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJhZGQtY2FyZFwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFnZSBJbml0aWFsaXphdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBFbmFibGUgdmFsaWRhdGlvbiBmb3IgYWxsIGZvcm1zXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuXG4vLyBSZW5kZXIgaW5pdGlhbCBjYXJkc1xuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwia2V5IiwidmFsdWUiLCJfdGhpcyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2VFbCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl90aGlzMiIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfY2FsbFN1cGVyIiwiX2ltYWdlRWxlbWVudCIsIl9jYXB0aW9uRWxlbWVudCIsIl9pbmhlcml0cyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJmb3JtSWQiLCJfcG9wdXBGb3JtIiwiZm9ybXMiLCJfaW5wdXRFbGVtZW50cyIsImVsZW1lbnRzIiwiZmlsdGVyIiwiZWxlbWVudCIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImpvYiIsIl9yZWYyIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJmb3JtVmFsaWRhdG9ycyIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImltYWdlUHJldmlld1BvcHVwIiwib3BlbiIsInJlbmRlckNhcmQiLCJnZXRWaWV3IiwidXNlckluZm8iLCJjYXJkU2VjdGlvbiIsImVkaXRQcm9maWxlUG9wdXAiLCJmb3JtRGF0YSIsInNldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJhZGRDYXJkUG9wdXAiLCJuZXdDYXJkIiwidGl0bGUiLCJ1cmwiLCJyZXNldEZvcm0iLCJzZXRFdmVudExpc3RlbmVycyIsImN1cnJlbnRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9